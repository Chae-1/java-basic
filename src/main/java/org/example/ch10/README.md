다형성(1)
==
객체지향 프로그래밍에서 가장 중요한 특징
- 다형성(Polymorphism): 다양한 형태
- 프로그래밍에서 한 객체가 여러 타입의 객체로 취급될 수 있는 능력을 말한다.
- 하나의 객체가 다른 타입으로 사용될 수 있다.

**다형적 참조**

부모 타입의 변수가 자식 인스턴스를 참조할 수 있다.
- 부모 타입은 자식을 담을 수 있지만, 자식은 부모를 담을 수 없다.
- 모든 하위 타입을 담을 수 있다.

**인스턴스 실행**
- 인스턴스의 실행은 변수의 타입에 따라 결정된다. `Parent` 타입의 변수에 자식 인스턴스를 담으면
  - `Parent` 클래스에서 찾을 수 있는 기능만 호출가능하다.
  - `Child` 클래스의 기능을 사용하지 못한다는 한계점을 갖는다.
- 하위 타입의 기능을 호출하고 싶다면 캐스팅을 해야한다.


### 캐스팅
- 다형적 참조를 사용해서 부모 타입의 변수에 자식 타입의 인스턴스를 참조하면 자식의 기능을 사용하지 못한다.
  - 이를 사용하기 위해, 부모 타입의 변수를 자식 타입의 변수로 캐스팅할 수 있다.
  - 부모에서 자식으로 내려간다고 해서 다운캐스팅이라고 한다.
  - 반대로, 자식에서 부모타입으로 변경하는 것은 업캐스팅이라고 한다.

**캐스팅의 종류**
다운캐스팅 결과를 변수에 담는 과정이 번거롭다. 괄호를 활용하여 일시적으로 다운캐스팅을 할 수 있다.
```java
((Child) poly).childMethod();
```
- 업캐스팅은 생략이 가능하지만, 다운캐스팅은 생략할 수 없다.
  - 꼭 필요하면 명시적으로 다운캐스팅해라.

**다운캐스팅의 주의점**
다운캐스팅은 잘못하면 심각한 런타임 오류가 발생한다.
- 업캐스팅의 경우 해당 타입의 상위 부모는 전부 생성되기에 발생하지 않는다.
- 다운캐스팅은 해당 타입의 상위 부모가 존재한다는 것을 보장할 수 없다.
  - `ClassCastException` 발생

**컴파일 오류 vs 런타임 오류**
컴파일 오류는 정말 찾기 쉽다. 런타임 오류는 골치가 아프다.

**instanceof**
해당 변수가 어떤 인스턴스를 참조하고 있는지 확인할 수 있는 키워드


### 다형성, 메서드 오버라이딩
다형성의 핵심은 메서드 오버라이딩이다.
- 항상 오버라이딩된 메서드가 우선적으로 호출된다.
- 부모 타입의 변수에 자식 타입의 인스턴스를 가지고 있고 오버라이딩된 메서드가 존재하면 항상 오버라이딩된 메서드가 호출된다.
